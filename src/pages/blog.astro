---
import Main from "../layouts/paths/home.astro"

// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = (await Astro.glob('./article/*.{md,mdx}')).sort(
  (a, b) => new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf()
);
---

<Main lang="vi">
  <style>
    ul {
      list-style-type: none;
      padding: unset;
    }
    ul li {
      display: flex;
    }
    ul li time {
      flex: 0 0 130px;
      font-style: italic;
      color: #595959;
    }
    ul li a:visited {
      color: #8e32dc;
    }
  </style>
  <main style="margin-top: 12vh;">
    <section>
      <ul>
        {
          posts.map((post) => (
          <li>
            <time datetime={post.frontmatter.date}>
              {new Date(post.frontmatter.date).toLocaleDateString('en-us', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
              })}
            </time>
            <a href={post.url}>{post.frontmatter.title}</a>
          </li>
          ))
        }
      </ul>
    </section>
  </main>
</Main>
